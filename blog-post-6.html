<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FANUC Macro B Programming: Custom Cycles & Variables - SHADER7</title>
    <meta name="description" content="Master FANUC Macro B programming with custom G-codes, system variables, and parameterized cycles. Real examples from shop floor by CNC machinist Nishikant Xalxo.">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; max-width: 800px; margin: 0 auto; padding: 2rem 1rem; line-height: 1.7; color: #1f2937; }
        h1 { color: #1e293b; }
        .meta { color: #64748b; margin-bottom: 2rem; }
        h2 { color: #334155; margin: 2rem 0 1rem; }
        .example { background: #f8fafc; padding: 1rem; border-left: 4px solid #2563eb; margin: 1rem 0; }
        code { background: #f1f5f9; padding: 0.2rem 0.4rem; border-radius: 4px; font-family: monospace; }
        nav { margin-bottom: 2rem; }
        nav a { color: #2563eb; margin-right: 1rem; }
        .author-box { background: #e0e7ff; padding: 1rem; border-radius: 8px; margin: 2rem 0; }
    </style>
</head>
<body>

<nav>
    <a href="blog.html">← Blog</a>
    <a href="index.html">Home</a>
</nav>

<h1>FANUC Macro B Programming: Custom Cycles & Variables</h1>
<p class="meta">By <strong>Nishikant Xalxo</strong> | FANUC CNC Programmer | Updated: January 10, 2025 | 12 min read</p>

<p>After 6 years of writing macros for FANUC 0i-MF and 30i-B controls, I've learned that Macro B is the single most underutilized feature in most shops. It can reduce programming time by 70% and eliminate errors. Here's how to master it.</p>

<h2>What is FANUC Macro B?</h2>

<p>Macro B is FANUC's parametric programming language that lets you use variables, logic, and loops in G-code. Think of it as "programming within a program." Unlike standard G-code that's static, macros adapt to different part dimensions automatically.</p>

<h2>System Variables (#100-#999)</h2>

<p>FANUC provides several ranges of variables:</p>
<ul>
    <li><strong>#100-#199:</strong> User variables (cleared at M30)</li>
    <li><strong>#500-#999:</strong> Keep variables (persist after reset)</li>
    <li><strong>#1000+:</strong> System variables (read machine data)</li>
</ul>

<div class="example">
    <strong>Real Example: Bolt Hole Circle Macro</strong>
    <pre><code>O9001 (BOLT HOLE CIRCLE)
#100 = 4          ; Number of holes
#101 = 50.0       ; Radius from center
#102 = 0          ; Starting angle (degrees)
#103 = 360 / #100 ; Angle increment
#104 = 1          ; Counter

N10 WHILE [#104 LE #100] DO1
  #105 = #101 * COS[#102]
  #106 = #101 * SIN[#102]
  G81 X#105 Y#106 Z-10.0 R1.0 F15.0
  #102 = #102 + #103
  #104 = #104 + 1
END1
G80
M99
</code></pre>
</div>

<h2>Calling Macros with G65</h2>

<p>Use <code>G65 P9001</code> to call macro O9001. Pass arguments directly:</p>

<div class="example">
    <strong>Main Program:</strong>
    <pre><code>O1000 (MAIN)
G90 G54 G00 X0 Y0
G65 P9001 A6.0 B75.0
...
</code></pre>
    <p>Arguments map to macro variables: A→#1, B→#2, etc.</p>
</div>

<h2>Conditional Statements</h2>

<p>FANUC macros support IF-THEN-ELSE logic:</p>

<div class="example">
    <pre><code>#100 = #504 (read current tool diameter)
IF [#100 LT 10.0] THEN #100 = 10.0
IF [#100 GT 25.0] GOTO 100
N50 G01 X#100 F20.0
...
N100 #3000 = 1 (TOOL TOO LARGE)
</code></pre>
</div>

<h2>Custom G-Codes</h2>

<p>You can assign macros to G-codes (on newer FANUC controls):</p>
<ul>
    <li>Parameter 6050 = 101 makes G101 call O9001</li>
    <li>Great for company-specific cycles</li>
    <li>Requires parameter access (password-protected)</li>
</ul>

<h2>System Variables for Machine Data</h2>

<p>Read real-time machine state:</p>
<ul>
    <li><code>#5021</code> - Current X position</li>
    <li><code>#5022</code> - Current Y position</li>
    <li><code>#5023</code> - Current Z position</li>
    <li><code>#3000</code> - Generate alarm programmatically</li>
</ul>

<div class="author-box">
    <strong>About the Author:</strong> Nishikant Xalxo has written 200+ FANUC macros for aerospace parts. He built the SHADER7 macro calculator to help other machinists. Questions? Email: <a href="mailto:nxdecore@gmail.com">nxdecore@gmail.com</a>
</div>

<p><strong>Next:</strong> Read our <a href="blog-post-3.html">FANUC Alarm Troubleshooting Guide</a></p>

</body>
</html>
