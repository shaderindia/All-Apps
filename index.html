
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Enhanced SEO Meta Tags -->
    <title>FairShare - Free Expense Splitter Calculator | Split Bills Fairly Among Groups</title>
    <meta name="description" content="Split expenses fairly among friends, roommates, and groups with FairShare. Calculate who owes what, track payments, and manage group expenses easily. Completely free expense splitting calculator with detailed breakdowns.">
    <meta name="keywords" content="expense splitter, bill splitter calculator, group expense tracker, fair share calculator, split expenses, roommate expenses, trip expense calculator, group payment tracker, free expense splitter">
    <meta name="author" content="SHADER7 - Nishikant Xalxo">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="FairShare - Free Expense Splitter Calculator">
    <meta property="og:description" content="Split expenses fairly among groups with detailed payment tracking and smart calculation algorithms.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://shader7.com/fairshare.html">
    <meta property="og:image" content="https://shader7.com/fairshare-preview.jpg">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üßÆ</text></svg>">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles -->
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #1f2937;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(34, 197, 94, 0.3);
        }
        
        .btn-secondary {
            background: white;
            color: #374151;
            border: 2px solid #e5e7eb;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .btn-secondary:hover {
            border-color: #22c55e;
            color: #22c55e;
        }
        
        .input-field {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #22c55e;
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }
        
        .expense-item {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }
        
        .expense-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .person-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }
        
        .person-card.owes {
            border-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
        }
        
        .person-card.receives {
            border-color: #22c55e;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #22c55e;
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        
        .result-summary {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .grid-cols-2, .grid-cols-3 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="glass-effect py-4 mb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-gray-800">üßÆ FairShare</span>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-gray-600 hover:text-green-600 transition-colors">‚Üê Back to SHADER7</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
        <!-- Header -->
        <div class="text-center mb-12 animate-fade-in">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
                FairShare Expense Splitter
            </h1>
            <p class="text-xl text-white/90 max-w-2xl mx-auto">
                Split expenses fairly among groups with smart calculations and detailed payment tracking
            </p>
        </div>

        <!-- Main Calculator -->
        <div class="glass-effect rounded-2xl p-6 md:p-8 mb-8">
            <!-- Step 1: Add People -->
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Step 1: Add People</h2>
                <div class="flex gap-4 mb-4">
                    <input 
                        type="text" 
                        id="personName" 
                        placeholder="Enter person's name" 
                        class="input-field flex-1"
                    >
                    <button onclick="addPerson()" class="btn-primary">Add Person</button>
                </div>
                <div id="peopleList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- People will be added here -->
                </div>
            </div>

            <!-- Step 2: Add Expenses -->
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Step 2: Add Expenses</h2>
                <div class="bg-gray-50 rounded-xl p-6 mb-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <input 
                            type="text" 
                            id="expenseDescription" 
                            placeholder="What was the expense for?" 
                            class="input-field"
                        >
                        <input 
                            type="number" 
                            id="expenseAmount" 
                            placeholder="Amount" 
                            step="0.01" 
                            class="input-field"
                        >
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Who paid?</label>
                        <select id="expensePayer" class="input-field">
                            <option value="">Select who paid</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-sm font-medium text-gray-700">Split Method</label>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-600">Equal</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="customSplit">
                                    <span class="slider"></span>
                                </label>
                                <span class="text-sm text-gray-600">Custom</span>
                            </div>
                        </div>
                        <div id="splitOptions" class="hidden">
                            <p class="text-sm text-gray-600 mb-2">Set custom amounts for each person:</p>
                            <div id="customSplitInputs"></div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Who should split this expense?</label>
                        <div id="expenseParticipants" class="grid grid-cols-2 md:grid-cols-3 gap-2">
                            <!-- Participants checkboxes will be added here -->
                        </div>
                    </div>
                    <button onclick="addExpense()" class="btn-primary w-full">Add Expense</button>
                </div>
                
                <div id="expensesList">
                    <!-- Expenses will be listed here -->
                </div>
            </div>

            <!-- Calculate Button -->
            <div class="text-center mb-8">
                <button onclick="calculateSplit()" class="btn-primary text-lg px-8 py-4">
                    Calculate Fair Split
                </button>
                <button onclick="clearAll()" class="btn-secondary ml-4">Clear All</button>
            </div>
        </div>

        <!-- Results -->
        <div id="results" class="hidden">
            <div class="glass-effect rounded-2xl p-6 md:p-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Payment Summary</h2>
                
                <!-- Summary Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-blue-50 rounded-xl p-6 text-center">
                        <div class="text-3xl font-bold text-blue-600" id="totalExpenses">$0.00</div>
                        <div class="text-blue-600 font-medium">Total Expenses</div>
                    </div>
                    <div class="bg-green-50 rounded-xl p-6 text-center">
                        <div class="text-3xl font-bold text-green-600" id="totalPeople">0</div>
                        <div class="text-green-600 font-medium">People Involved</div>
                    </div>
                    <div class="bg-purple-50 rounded-xl p-6 text-center">
                        <div class="text-3xl font-bold text-purple-600" id="avgPerPerson">$0.00</div>
                        <div class="text-purple-600 font-medium">Average per Person</div>
                    </div>
                </div>

                <!-- Individual Balances -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Individual Balances</h3>
                    <div id="individualBalances" class="space-y-4">
                        <!-- Individual balances will be shown here -->
                    </div>
                </div>

                <!-- Payment Instructions -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Who Pays Whom</h3>
                    <div id="paymentInstructions" class="space-y-4">
                        <!-- Payment instructions will be shown here -->
                    </div>
                </div>

                <!-- Export Options -->
                <div class="flex flex-wrap gap-4 justify-center">
                    <button onclick="exportToText()" class="btn-secondary">Export as Text</button>
                    <button onclick="exportToCSV()" class="btn-secondary">Export as CSV</button>
                    <button onclick="printResults()" class="btn-secondary">Print Summary</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        let people = [];
        let expenses = [];
        let nextPersonId = 1;
        let nextExpenseId = 1;

        // Add person to the group
        function addPerson() {
            const nameInput = document.getElementById('personName');
            const name = nameInput.value.trim();
            
            if (!name) {
                alert('Please enter a person\'s name');
                return;
            }
            
            if (people.find(p => p.name.toLowerCase() === name.toLowerCase())) {
                alert('Person already exists');
                return;
            }
            
            const person = {
                id: nextPersonId++,
                name: name,
                paid: 0,
                owes: 0,
                balance: 0
            };
            
            people.push(person);
            nameInput.value = '';
            updatePeopleDisplay();
            updateExpenseOptions();
        }

        // Remove person from the group
        function removePerson(personId) {
            people = people.filter(p => p.id !== personId);
            // Remove from expenses too
            expenses = expenses.filter(e => e.payerId !== personId);
            expenses.forEach(expense => {
                expense.participants = expense.participants.filter(p => p.personId !== personId);
            });
            updatePeopleDisplay();
            updateExpenseOptions();
            updateExpensesDisplay();
        }

        // Update people display
        function updatePeopleDisplay() {
            const container = document.getElementById('peopleList');
            container.innerHTML = '';
            
            people.forEach(person => {
                const div = document.createElement('div');
                div.className = 'bg-white border border-gray-200 rounded-lg p-4 flex items-center justify-between';
                div.innerHTML = `
                    <span class="font-medium text-gray-800">${person.name}</span>
                    <button onclick="removePerson(${person.id})" class="text-red-500 hover:text-red-700">
                        ‚úï
                    </button>
                `;
                container.appendChild(div);
            });
        }

        // Update expense form options
        function updateExpenseOptions() {
            const payerSelect = document.getElementById('expensePayer');
            const participantsDiv = document.getElementById('expenseParticipants');
            
            // Update payer options
            payerSelect.innerHTML = '<option value="">Select who paid</option>';
            people.forEach(person => {
                payerSelect.innerHTML += `<option value="${person.id}">${person.name}</option>`;
            });
            
            // Update participants checkboxes
            participantsDiv.innerHTML = '';
            people.forEach(person => {
                const div = document.createElement('div');
                div.className = 'flex items-center space-x-2';
                div.innerHTML = `
                    <input type="checkbox" id="participant_${person.id}" value="${person.id}" checked 
                           class="rounded border-gray-300 text-green-600 focus:ring-green-500">
                    <label for="participant_${person.id}" class="text-sm text-gray-700">${person.name}</label>
                `;
                participantsDiv.appendChild(div);
            });
        }

        // Toggle custom split options
        document.getElementById('customSplit').addEventListener('change', function() {
            const splitOptions = document.getElementById('splitOptions');
            const customInputs = document.getElementById('customSplitInputs');
            
            if (this.checked) {
                splitOptions.classList.remove('hidden');
                updateCustomSplitInputs();
            } else {
                splitOptions.classList.add('hidden');
            }
        });

        // Update custom split inputs
        function updateCustomSplitInputs() {
            const container = document.getElementById('customSplitInputs');
            container.innerHTML = '';
            
            const selectedParticipants = Array.from(document.querySelectorAll('#expenseParticipants input:checked'))
                .map(input => parseInt(input.value));
            
            selectedParticipants.forEach(personId => {
                const person = people.find(p => p.id === personId);
                if (person) {
                    const div = document.createElement('div');
                    div.className = 'flex items-center space-x-4 mb-2';
                    div.innerHTML = `
                        <label class="w-24 text-sm text-gray-700">${person.name}:</label>
                        <input type="number" step="0.01" placeholder="Amount" 
                               class="input-field" id="custom_${personId}">
                    `;
                    container.appendChild(div);
                }
            });
        }

        // Update custom inputs when participants change
        document.getElementById('expenseParticipants').addEventListener('change', function() {
            if (document.getElementById('customSplit').checked) {
                updateCustomSplitInputs();
            }
        });

        // Add expense
        function addExpense() {
            const description = document.getElementById('expenseDescription').value.trim();
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const payerId = parseInt(document.getElementById('expensePayer').value);
            const isCustomSplit = document.getElementById('customSplit').checked;
            
            if (!description || !amount || !payerId) {
                alert('Please fill in all required fields');
                return;
            }
            
            const selectedParticipants = Array.from(document.querySelectorAll('#expenseParticipants input:checked'))
                .map(input => parseInt(input.value));
            
            if (selectedParticipants.length === 0) {
                alert('Please select at least one participant');
                return;
            }
            
            let participants = [];
            
            if (isCustomSplit) {
                let totalCustomAmount = 0;
                selectedParticipants.forEach(personId => {
                    const customAmount = parseFloat(document.getElementById(`custom_${personId}`).value) || 0;
                    participants.push({ personId, amount: customAmount });
                    totalCustomAmount += customAmount;
                });
                
                if (Math.abs(totalCustomAmount - amount) > 0.01) {
                    alert(`Custom split amounts (${totalCustomAmount.toFixed(2)}) don't match the total expense (${amount.toFixed(2)})`);
                    return;
                }
            } else {
                const splitAmount = amount / selectedParticipants.length;
                selectedParticipants.forEach(personId => {
                    participants.push({ personId, amount: splitAmount });
                });
            }
            
            const expense = {
                id: nextExpenseId++,
                description,
                amount,
                payerId,
                participants,
                isCustomSplit
            };
            
            expenses.push(expense);
            clearExpenseForm();
            updateExpensesDisplay();
        }

        // Clear expense form
        function clearExpenseForm() {
            document.getElementById('expenseDescription').value = '';
            document.getElementById('expenseAmount').value = '';
            document.getElementById('expensePayer').value = '';
            document.getElementById('customSplit').checked = false;
            document.getElementById('splitOptions').classList.add('hidden');
            
            // Check all participants by default
            document.querySelectorAll('#expenseParticipants input').forEach(input => {
                input.checked = true;
            });
        }

        // Remove expense
        function removeExpense(expenseId) {
            expenses = expenses.filter(e => e.id !== expenseId);
            updateExpensesDisplay();
        }

        // Update expenses display
        function updateExpensesDisplay() {
            const container = document.getElementById('expensesList');
            container.innerHTML = '';
            
            if (expenses.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">No expenses added yet</p>';
                return;
            }
            
            expenses.forEach(expense => {
                const payer = people.find(p => p.id === expense.payerId);
                const participantNames = expense.participants
                    .map(p => people.find(person => person.id === p.personId)?.name)
                    .join(', ');
                
                const div = document.createElement('div');
                div.className = 'expense-item';
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-semibold text-gray-800">${expense.description}</h4>
                        <button onclick="removeExpense(${expense.id})" class="text-red-500 hover:text-red-700">
                            ‚úï
                        </button>
                    </div>
                    <div class="text-2xl font-bold text-green-600 mb-2">$${expense.amount.toFixed(2)}</div>
                    <div class="text-sm text-gray-600">
                        <p><strong>Paid by:</strong> ${payer?.name || 'Unknown'}</p>
                        <p><strong>Split among:</strong> ${participantNames}</p>
                        <p><strong>Split method:</strong> ${expense.isCustomSplit ? 'Custom amounts' : 'Equal split'}</p>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // Calculate split
        function calculateSplit() {
            if (people.length === 0) {
                alert('Please add some people first');
                return;
            }
            
            if (expenses.length === 0) {
                alert('Please add some expenses first');
                return;
            }
            
            // Reset balances
            people.forEach(person => {
                person.paid = 0;
                person.owes = 0;
                person.balance = 0;
            });
            
            // Calculate what each person paid and owes
            expenses.forEach(expense => {
                const payer = people.find(p => p.id === expense.payerId);
                if (payer) {
                    payer.paid += expense.amount;
                }
                
                expense.participants.forEach(participant => {
                    const person = people.find(p => p.id === participant.personId);
                    if (person) {
                        person.owes += participant.amount;
                    }
                });
            });
            
            // Calculate net balance (positive means they should receive, negative means they owe)
            people.forEach(person => {
                person.balance = person.paid - person.owes;
            });
            
            displayResults();
        }

        // Display results
        function displayResults() {
            const totalExpenses = expenses.reduce((sum, expense) => sum + expense.amount, 0);
            const avgPerPerson = people.length > 0 ? totalExpenses / people.length : 0;
            
            // Update summary stats
            document.getElementById('totalExpenses').textContent = `$${totalExpenses.toFixed(2)}`;
            document.getElementById('totalPeople').textContent = people.length;
            document.getElementById('avgPerPerson').textContent = `$${avgPerPerson.toFixed(2)}`;
            
            // Display individual balances
            const balancesContainer = document.getElementById('individualBalances');
            balancesContainer.innerHTML = '';
            
            people.forEach(person => {
                const div = document.createElement('div');
                div.className = `person-card ${person.balance > 0 ? 'receives' : person.balance < 0 ? 'owes' : ''}`;
                
                let statusText = '';
                let statusClass = '';
                if (person.balance > 0) {
                    statusText = `Should receive $${Math.abs(person.balance).toFixed(2)}`;
                    statusClass = 'text-green-600';
                } else if (person.balance < 0) {
                    statusText = `Owes $${Math.abs(person.balance).toFixed(2)}`;
                    statusClass = 'text-red-600';
                } else {
                    statusText = 'All settled up';
                    statusClass = 'text-gray-600';
                }
                
                div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <h4 class="font-bold text-lg text-gray-800">${person.name}</h4>
                            <p class="text-sm text-gray-600">Paid: $${person.paid.toFixed(2)} | Owes: $${person.owes.toFixed(2)}</p>
                        </div>
                        <div class="text-right">
                            <div class="text-xl font-bold ${statusClass}">${statusText}</div>
                        </div>
                    </div>
                `;
                balancesContainer.appendChild(div);
            });
            
            // Calculate and display payment instructions
            calculatePaymentInstructions();
            
            // Show results section
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // Calculate optimal payment instructions
        function calculatePaymentInstructions() {
            const container = document.getElementById('paymentInstructions');
            container.innerHTML = '';
            
            // Create copies of people array for calculation
            const debtors = people.filter(p => p.balance < 0)
                .map(p => ({ ...p, remaining: Math.abs(p.balance) }));
            const creditors = people.filter(p => p.balance > 0)
                .map(p => ({ ...p, remaining: p.balance }));
            
            if (debtors.length === 0 && creditors.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-600 py-8">üéâ Everyone is settled up! No payments needed.</p>';
                return;
            }
            
            const payments = [];
            
            // Calculate minimal payments
            while (debtors.length > 0 && creditors.length > 0) {
                const debtor = debtors[0];
                const creditor = creditors[0];
                
                const amount = Math.min(debtor.remaining, creditor.remaining);
                
                payments.push({
                    from: debtor.name,
                    to: creditor.name,
                    amount: amount
                });
                
                debtor.remaining -= amount;
                creditor.remaining -= amount;
                
                if (debtor.remaining === 0) {
                    debtors.shift();
                }
                if (creditor.remaining === 0) {
                    creditors.shift();
                }
            }
            
            // Display payment instructions
            if (payments.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-600 py-8">üéâ No payments needed! Everyone is settled up.</p>';
            } else {
                payments.forEach((payment, index) => {
                    const div = document.createElement('div');
                    div.className = 'bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-center justify-between';
                    div.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <div class="bg-yellow-100 rounded-full p-2">
                                <span class="text-yellow-600 font-bold">${index + 1}</span>
                            </div>
                            <div>
                                <p class="font-semibold text-gray-800">
                                    <span class="text-red-600">${payment.from}</span> pays 
                                    <span class="text-green-600">${payment.to}</span>
                                </p>
                                <p class="text-2xl font-bold text-yellow-600">$${payment.amount.toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <button onclick="markPaymentDone(${index})" class="btn-secondary text-sm">
                                Mark as Paid
                            </button>
                        </div>
                    `;
                    container.appendChild(div);
                });
            }
        }

        // Mark payment as done (visual feedback)
        function markPaymentDone(paymentIndex) {
            const paymentElements = document.querySelectorAll('#paymentInstructions > div');
            if (paymentElements[paymentIndex]) {
                paymentElements[paymentIndex].style.opacity = '0.5';
                paymentElements[paymentIndex].innerHTML += '<div class="absolute inset-0 flex items-center justify-center bg-green-500 bg-opacity-20 rounded-lg"><span class="text-green-600 font-bold text-xl">‚úì PAID</span></div>';
                paymentElements[paymentIndex].style.position = 'relative';
            }
        }

        // Export functions
        function exportToText() {
            let text = 'FAIRSHARE EXPENSE SUMMARY\n';
            text += '========================\n\n';
            
            const totalExpenses = expenses.reduce((sum, expense) => sum + expense.amount, 0);
            text += `Total Expenses: $${totalExpenses.toFixed(2)}\n`;
            text += `People Involved: ${people.length}\n`;
            text += `Average per Person: $${(totalExpenses / people.length).toFixed(2)}\n\n`;
            
            text += 'EXPENSES:\n';
            text += '---------\n';
            expenses.forEach(expense => {
                const payer = people.find(p => p.id === expense.payerId);
                text += `${expense.description}: $${expense.amount.toFixed(2)} (paid by ${payer?.name})\n`;
            });
            
            text += '\nINDIVIDUAL BALANCES:\n';
            text += '-------------------\n';
            people.forEach(person => {
                let status = '';
                if (person.balance > 0) {
                    status = `should receive $${Math.abs(person.balance).toFixed(2)}`;
                } else if (person.balance < 0) {
                    status = `owes $${Math.abs(person.balance).toFixed(2)}`;
                } else {
                    status = 'all settled up';
                }
                text += `${person.name}: ${status}\n`;
            });
            
            // Create and download file
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'fairshare-summary.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        function exportToCSV() {
            let csv = 'Name,Paid,Owes,Balance,Status\n';
            
            people.forEach(person => {
                let status = '';
                if (person.balance > 0) {
                    status = `Receives $${Math.abs(person.balance).toFixed(2)}`;
                } else if (person.balance < 0) {
                    status = `Owes $${Math.abs(person.balance).toFixed(2)}`;
                } else {
                    status = 'Settled';
                }
                
                csv += `"${person.name}",${person.paid.toFixed(2)},${person.owes.toFixed(2)},${person.balance.toFixed(2)},"${status}"\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'fairshare-summary.csv';
            a.click();
            URL.revokeObjectURL(url);
        }

        function printResults() {
            window.print();
        }

        // Clear all data
        function clearAll() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                people = [];
                expenses = [];
                nextPersonId = 1;
                nextExpenseId = 1;
                
                updatePeopleDisplay();
                updateExpenseOptions();
                updateExpensesDisplay();
                document.getElementById('results').classList.add('hidden');
                clearExpenseForm();
            }
        }

        // Initialize with Enter key support
        document.getElementById('personName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addPerson();
            }
        });

        document.getElementById('expenseDescription').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('expenseAmount').focus();
            }
        });

        document.getElementById('expenseAmount').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addExpense();
            }
        });

        // Add some demo data for testing
        function loadDemoData() {
            // Add demo people
            document.getElementById('personName').value = 'Alice';
            addPerson();
            document.getElementById('personName').value = 'Bob';
            addPerson();
            document.getElementById('personName').value = 'Charlie';
            addPerson();
            
            // Add demo expenses
            setTimeout(() => {
                document.getElementById('expenseDescription').value = 'Dinner at Restaurant';
                document.getElementById('expenseAmount').value = '120.00';
                document.getElementById('expensePayer').value = '1';
                addExpense();
                
                document.getElementById('expenseDescription').value = 'Groceries';
                document.getElementById('expenseAmount').value = '85.50';
                document.getElementById('expensePayer').value = '2';
                addExpense();
                
                document.getElementById('expenseDescription').value = 'Gas';
                document.getElementById('expenseAmount').value = '45.00';
                document.getElementById('expensePayer').value = '3';
                addExpense();
            }, 100);
        }

        // Show demo button only in development
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            const demoButton = document.createElement('button');
            demoButton.textContent = 'Load Demo Data';
            demoButton.className = 'btn-secondary fixed top-4 right-4 z-50';
            demoButton.onclick = loadDemoData;
            document.body.appendChild(demoButton);
        }
    </script>

    <!-- Print Styles -->
    <style media="print">
        body {
            background: white !important;
        }
        
        .glass-effect {
            background: white !important;
            backdrop-filter: none !important;
            box-shadow: none !important;
        }
        
        nav, .btn-primary, .btn-secondary {
            display: none !important;
        }
        
        .no-print {
            display: none !important;
        }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "FairShare - Expense Splitter",
        "description": "Free expense splitting calculator for groups, roommates, and shared costs",
        "url": "https://shader7.com/fairshare.html",
        "applicationCategory": "Finance",
        "operatingSystem": "Any web browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Smart expense splitting",
            "Custom split amounts",
            "Payment tracking",
            "Export summaries",
            "Group management"
        ]
    }
    </script>
</body>
</html>
