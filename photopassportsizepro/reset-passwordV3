<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Reset Password</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body {
    font-family: Poppins, sans-serif;
    background:#f0f0f0;
    padding:40px;
}
.box {
    max-width:400px;
    margin:auto;
    padding:25px;
    background:white;
    border-radius:12px;
    box-shadow:0 4px 15px rgba(0,0,0,0.1);
}
input, button {
    width:100%;
    padding:12px;
    margin-top:10px;
    border-radius:10px;
    border:1px solid #ddd;
}
button {
    background:#1c7ed6;
    color:white;
    border:none;
    cursor:pointer;
}
#status { margin-top:10px; color:#444; }
</style>
</head>

<body>

<div class="box">
    <h2>Reset Your Password</h2>

    <input type="password" id="newpass" placeholder="Enter new password">
    <button onclick="resetPassword()">Update Password</button>

    <p id="status"></p>
</div>

<script>
const client = supabase.createClient(
    "https://wtryahnysabnjdcypihl.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind0cnlhaG55c2FibmpkY3lwaWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMTM0NTAsImV4cCI6MjA3NzY4OTQ1MH0.uLi6Nfk8NQ9KmR_Igt9sb_wtQxtujm_lipT6TU3dwjM"
);

async function resetPassword() {
    const newPass = document.getElementById("newpass").value.trim();
    const status = document.getElementById("status");

    if (!newPass || newPass.length < 6) {
        status.textContent = "Password must be at least 6 characters.";
        return;
    }

    const { error } = await client.auth.updateUser({ password: newPass });

    if (error) status.textContent = error.message;
    else {
        status.style.color = "green";
        status.textContent = "Password updated! Redirecting...";
        setTimeout(() => window.location.href = "login.html", 1200);
    }
}
</script>

</body>
</html>
