<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Passport Photo Maker</title>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css?family=Inter:400,600,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<!-- Cropper.js -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css" />

<!-- Main Styles -->
<style>
  /* Basic Reset */
  * { box-sizing: border-box; margin:0; padding:0; font-family: 'Inter', sans-serif; }
  body { background: #f0f2f5; color: #111; min-height: 100vh; display:flex; flex-direction:column; }
  header { padding:1rem; text-align:center; font-weight:700; font-size:1.5rem; color:#fff; background: #6366f1; }
  main { flex:1; padding:1rem; max-width:1200px; margin:0 auto; width:100%; }
  h2 { font-size:1.2rem; margin-bottom:0.5rem; }

  /* Card / Glass */
  .card-glass { background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius:12px; padding:1rem; margin-bottom:1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }

  /* Upload Area */
  #upload-area { border:2px dashed #6366f1; border-radius:12px; padding:2rem; text-align:center; cursor:pointer; transition:0.3s; }
  #upload-area:hover { background: rgba(99,102,241,0.05); }

  #editor-container { display:flex; flex-direction:column; gap:0.5rem; }
  #image-to-crop { max-width:100%; display:block; margin:0 auto; border-radius:8px; }

  /* Toolbar */
  .editor-toolbar { display:flex; flex-wrap:wrap; gap:0.5rem; margin-bottom:0.5rem; }
  .editor-toolbar button, .editor-toolbar input[type=color] { padding:0.5rem 1rem; border:none; border-radius:6px; cursor:pointer; font-weight:600; }
  .editor-toolbar button { background:#6366f1; color:#fff; transition:0.2s; }
  .editor-toolbar button:hover { background:#4f46e5; }

  .color-picker-wrapper { display:flex; align-items:center; }
  input[type=color] { width:40px; height:40px; border:none; padding:0; cursor:pointer; border-radius:6px; }

  /* Preview */
  .preview-panel { margin-top:1rem; }
  #output-canvas { width:100%; max-width:400px; margin:0 auto; display:block; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }

  /* Buttons */
  .btn-main { background:#6366f1; color:#fff; border:none; padding:0.6rem 1rem; border-radius:6px; cursor:pointer; font-weight:600; margin-top:0.5rem; width:100%; }
  .btn-main:hover { background:#4f46e5; }

  /* Responsive */
  @media(max-width:768px){
    .editor-toolbar { flex-direction: column; }
  }

  /* Hidden helper */
  .hidden { display:none; }
</style>
</head>
<body>
<header>
  <i class="fa fa-passport"></i> Passport Photo Maker
</header>

<main>
  <section class="card-glass">
    <h2><i class="fa fa-image"></i> Upload & Edit</h2>
    <div id="upload-area"><i class="fa fa-cloud-upload-alt fa-2x"></i><p>Click or Drag & Drop to Upload</p></div>
    <input type="file" id="photo-upload" accept="image/*" hidden>
    <div id="editor-container" class="hidden">
      <div class="editor-toolbar">
        <button id="remove-bg-btn"><i class="fa fa-magic"></i> Remove BG</button>
        <button id="rotate-left"><i class="fa fa-undo"></i> Rotate Left</button>
        <button id="rotate-right"><i class="fa fa-redo"></i> Rotate Right</button>
        <button id="reset-crop"><i class="fa fa-sync"></i> Reset</button>
        <div class="color-picker-wrapper" title="Background Color">
          <input type="color" id="bg-color-picker" value="#ffffff">
        </div>
      </div>
      <img id="image-to-crop" src="" alt="Upload Image">
    </div>
  </section>

  <section class="card-glass preview-panel">
    <h2><i class="fa fa-eye"></i> Preview & Download</h2>
    <canvas id="output-canvas"></canvas>
    <button class="btn-main" id="download-btn"><i class="fa fa-download"></i> Download</button>
    <button class="btn-main" id="download-hq-btn"><i class="fa fa-star"></i> HQ Download</button>
  </section>
</main>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
<script type="module" src="auth.js"></script>
<script type="module" src="passport.js"></script>
</body>
</html>
