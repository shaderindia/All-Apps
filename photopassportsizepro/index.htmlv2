<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FCJR8H4DME"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-FCJR8H4DME');
  </script>
  
  <!-- Supabase CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <meta charset="UTF-8">
  <title>Free Online Passport Photo Maker | Create & Print Passport Photos</title>
  <meta name="description" content="Create, crop, and print free passport photos online easily. Our tool provides ultra-smooth cropping and zooming, and perfect formatting for various passport photo requirements.">
  <meta name="keywords" content="passport photo maker, online passport photo, free passport photo, crop passport photo, print passport photo, passport photo online, digital passport photo, passport photo tool, passport photo creator, free passport photo maker, photo cropping tool, passport size photo, passport photo printing">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="theme-color" content="#6366f1">

  <!-- FontAwesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <!-- Google Fonts (Inter) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Cropper.js CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css" />

  <!-- Main Styles -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header class="header-glass">
    <div class="header-content">
      <h1 class="header-title">
        <i class="fa fa-passport"></i> Passport Photo Maker
        <span class="header-badge">2025</span>
      </h1>
      <div class="header-sub">
        Create, crop, and print passport photos â€” ultra-smooth, mobile friendly, and completely free!
      </div>
    </div>
    <div class="header-nav">
      <button class="nav-btn" id="theme-btn" title="Toggle dark mode" aria-label="Toggle dark mode">
        <i class="fa fa-moon"></i>
      </button>
      <button class="nav-btn" id="info-btn" title="How to use" aria-label="How to use">
        <i class="fa fa-info-circle"></i>
      </button>
      <button class="nav-btn" id="logout-btn" title="Logout" aria-label="Logout">
        <i class="fa fa-sign-out-alt"></i>
      </button>
    </div>
  </header>

  <main>
    <p class="text-center text-lg mb-8">
      Welcome to our <strong>free online passport photo maker</strong>! Easily <strong>create passport photos</strong>,
      crop, zoom, and format them for various requirements. Download or <strong>print passport photos</strong> with our user-friendly and completely free tool.
    </p>

    <!-- Step 1: Upload & Edit -->
    <section class="card card-glass shadow-lg">
      <h2><i class="fa fa-image"></i> 1. Upload & Edit</h2>

      <div class="upload-wrapper">
        <div class="upload-area" id="upload-area" role="button" tabindex="0" aria-label="Upload photo area">
          <div class="upload-placeholder">
            <i class="fa fa-cloud-upload-alt fa-3x"></i>
            <p>Click or Drag & Drop to Upload Photo</p>
          </div>
        </div>
      </div>
      <input type="file" id="photo-upload" accept="image/*" aria-label="Upload your photo" hidden>

      <div id="editor-container" class="hidden">
        <div class="editor-toolbar-wrapper">
          <div class="editor-toolbar">
            <button class="btn-secondary" id="remove-bg-btn" aria-label="Remove background">
              <i class="fa fa-magic"></i> Remove Background
            </button>
            <div class="color-picker-wrapper" title="Background Color">
              <input type="color" id="bg-color-picker" value="#ffffff" aria-label="Background color picker">
            </div>
            <button class="btn-secondary" id="rotate-left" title="Rotate left" aria-label="Rotate left">
              <i class="fa fa-undo"></i>
            </button>
            <button class="btn-secondary" id="rotate-right" title="Rotate right" aria-label="Rotate right">
              <i class="fa fa-redo"></i>
            </button>
            <button class="btn-secondary" id="reset-crop" title="Reset" aria-label="Reset crop">
              <i class="fa fa-sync"></i>
            </button>
          </div>
        </div>

        <div class="crop-container">
          <img id="image-to-crop" src="" alt="Image to crop">
        </div>

        <div id="bg-processing" class="processing-overlay hidden" aria-hidden="true">
          <div class="spinner"></div>
          <p>Removing Background...</p>
        </div>
      </div>
    </section>

    <!-- Step 2: Settings & Preview -->
    <section class="card card-glass shadow-lg" id="settings-section">
      <h2><i class="fa fa-sliders-h"></i> 2. Settings & Preview</h2>

      <div class="split-view">
        <!-- Controls -->
        <div class="controls-panel">

          <!-- Quick Actions -->
          <div class="settings-group">
            <h3>Quick Actions</h3>
            <div class="btn-group">
              <button class="btn-main" id="autofix-btn" aria-label="Auto-fix layout">
                <i class="fa fa-magic"></i> AutoFix Layout
              </button>
            </div>
          </div>

          <!-- Dimensions -->
          <div class="settings-group">
            <h3>Dimensions</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="unit">Unit</label>
                <select id="unit">
                  <option value="mm">mm</option>
                  <option value="inch">inch</option>
                  <option value="px">px</option>
                </select>
              </div>
              <div class="form-group">
                <label for="dpi">DPI</label>
                <input type="number" id="dpi" value="300" min="72" max="1200" step="1">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="photo-width">Width</label>
                <input type="number" id="photo-width" value="35" min="1" step="1">
              </div>
              <div class="form-group">
                <label for="photo-height">Height</label>
                <input type="number" id="photo-height" value="45" min="1" step="1">
              </div>
            </div>
          </div>

          <!-- Layout -->
          <div class="settings-group">
            <h3>Layout</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="page-size">Paper Size</label>
                <select id="page-size">
                  <option value="a4">A4</option>
                  <option value="4r">4R (4"x6")</option>
                  <option value="custom">Custom</option>
                </select>
              </div>
              <div class="form-group">
                <label for="num-photos">Count</label>
                <input type="number" id="num-photos" value="8" min="1" max="100" step="1">
              </div>
            </div>
            <div id="custom-page-size" class="form-row hidden">
              <div class="form-group">
                <label for="custom-width">Custom Width</label>
                <input type="number" id="custom-width" placeholder="W" min="1">
              </div>
              <div class="form-group">
                <label for="custom-height">Custom Height</label>
                <input type="number" id="custom-height" placeholder="H" min="1">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="h-spacing">Gap (H)</label>
                <input type="number" id="h-spacing" value="10" min="0" step="1">
              </div>
              <div class="form-group">
                <label for="v-spacing">Gap (V)</label>
                <input type="number" id="v-spacing" value="10" min="0" step="1">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="margin-top">Margin Top</label>
                <input type="number" id="margin-top" value="10" min="0" step="1">
              </div>
              <div class="form-group">
                <label for="margin-left">Margin Left</label>
                <input type="number" id="margin-left" value="10" min="0" step="1">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group checkbox-group">
                <input type="checkbox" id="autocenter-margin">
                <label for="autocenter-margin">Auto-Center</label>
              </div>
              <div class="form-group checkbox-group">
                <input type="checkbox" id="show-cutlines">
                <label for="show-cutlines">Show Cutlines</label>
              </div>
              <div class="form-group checkbox-group">
                <input type="checkbox" id="add-border">
                <label for="add-border">Add Border</label>
              </div>
            </div>
          </div>

        </div>

        <!-- Live Preview -->
        <div class="preview-panel">
          <h3>Print Preview</h3>
          <div class="canvas-wrapper">
            <canvas id="output-canvas" aria-label="Print preview canvas"></canvas>
          </div>
          <div class="download-actions">
            <div class="form-group">
              <label for="format" class="sr-only">Format</label>
              <select id="format">
                <option value="jpg">JPG</option>
                <option value="png">PNG</option>
              </select>
            </div>
            <button class="btn-main" id="download-btn" aria-label="Download">
              <i class="fa fa-download"></i> Download
            </button>
            <button class="btn-main" id="download-hq-btn" aria-label="High quality download">
              <i class="fa fa-star"></i> HQ Download
            </button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <div class="branding">
      <div style="margin-top:0.7em;">
        Credits: Released by <strong>nishikant xalxo</strong> (<a href="https://www.instagram.com/nishix_vamp" target="_blank" rel="noopener noreferrer">@nishix_vamp</a>)
        <br>
        Owner: <b>shaderindia</b> &nbsp;|&nbsp; Release date: <b>26 May 2025</b>
      </div>
      <div class="footer-links mb-2 flex flex-wrap justify-center">
        <a href="./about.html">About</a>
        <a href="./faq.html">FAQ</a>
        <a href="./privacy.html">Privacy Policy</a>
        <a href="./terms.html">Terms and Condition</a>
      </div>
      <p>&copy; 2025 Nishikant Xalxo - Free Apps for You. All rights reserved.</p>
      <p class="mt-2 text-sm">Built with <span class="text-red-500">&hearts;</span> and code.</p>
    </div>
  </footer>

  <!-- Modal for Info/How to Use -->
  <div class="modal-glass" id="info-modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-labelledby="modal-title">
      <button class="close-btn" id="close-info" aria-label="Close">
        <i class="fa fa-times"></i>
      </button>
      <h2 id="modal-title"><i class="fa fa-info-circle"></i> How to Use</h2>
      <ul>
        <li>Upload a clear, straight photo (JPG/PNG).</li>
        <li>Use <b>Remove Background</b> for a professional look.</li>
        <li>Crop the photo to frame the face correctly.</li>
        <li>Adjust settings like size, spacing, and paper type.</li>
        <li>Download and print!</li>
      </ul>
    </div>
  </div>

  <!-- Supabase Authentication Script -->
  <script>
    // Initialize Supabase
    const supabaseUrl = 'https://wtryahnysabnjdcypihl.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind0cnlhaG55c2FibmpkY3lwaWhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMTM0NTAsImV4cCI6MjA3NzY4OTQ1MH0.uLi6Nfk8NQ9KmR_Igt9sb_wtQxtujm_lipT6TU3dwjM';
    const supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);

    async function checkAuth() {
      const { data: { session }, error } = await supabaseClient.auth.getSession();
      if (error || !session) {
        console.warn('Auth check failed or no session, redirecting to login');
        // Uncomment the line below in production
        // window.location.href = 'login.html';
      }
    }

    const logoutBtn = document.getElementById('logout-btn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', async () => {
        const { error } = await supabaseClient.auth.signOut();
        if (error) {
          console.error('Logout error:', error);
          alert('Logout failed. Please try again.');
        } else {
          console.log('Logout successful');
          // Uncomment the line below in production
          // window.location.href = 'login.html';
        }
      });
    }

    // Initialize auth check
    checkAuth();
  </script>

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>

  <!-- Main Script -->
  <script src="script.js"></script>
</body>
</html>
